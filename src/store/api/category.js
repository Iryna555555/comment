import { createAsyncThunk } from "@reduxjs/toolkit";
// –í —ç—Ç–æ–π –ø–∞–ø–∫–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
//  —Å —Å–µ—Ä–≤–µ—Ä–∞. –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç fetch() –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏ 
// createAsyncThunk –∏–∑ @reduxjs/toolkit, —á—Ç–æ–±—ã Redux –º–æ–≥ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö 
// —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

// category.js (–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤)
// –≠—Ç–æ—Ç —Ñ–∞–π–ª –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–≥—Ä—É–∑–∫—É —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —Å–µ—Ä–≤–µ—Ä–∞.


export const fetchCategories = createAsyncThunk(//–°–æ–∑–¥–∞—ë–º fetchCategories ‚Äì –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º createAsyncThunk 
    // createAsyncThunk ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ Redux Toolkit, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—ë—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.
    // –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç Redux –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "loading", "succeeded", "failed").
    // "loading" ‚Äì –∏–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞ (–¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞).
    // "succeeded" ‚Äì —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ (–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ state).
    // "failed" ‚Äì –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª, –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏ —Ç. –¥.).
    "category/fetchCategories", // –≠—Ç–æ –∏–º—è –¥–ª—è Redux, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏.
    async (_, { rejectWithValue }) => {
        // –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç _ ‚Äì –∑–¥–µ—Å—å –º–æ–≥ –±—ã –±—ã—Ç—å payload, –Ω–æ –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω 
        // (–ø–æ—ç—Ç–æ–º—É _).–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ fetch(), —Ç–æ payload –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
        // –í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç { rejectWithValue } ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, 
        // —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫–∏.
        // –†–∞–∑–±–∏—Ä–∞–µ–º rejectWithValue
        // –§—É–Ω–∫—Ü–∏—è rejectWithValue() ‚Äì —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π 
        // –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ createAsyncThunk.
        try {
            const response = await fetch("https://exam-server-5c4e.onrender.com/categories/all");
            // fetch("https://exam-server-5c4e.onrender.com/categories/all") ‚Äì –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
            if (!response.ok) {
                throw new Error("Failed to fetch categories");
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å–ø–µ—à–Ω–æ –ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ
                // response.ok ‚Äì true, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª —Å—Ç–∞—Ç—É—Å 200.
                // –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É (404, 500 –∏ —Ç. –¥.), –≤—ã–∑—ã–≤–∞–µ–º throw new Error().
            }
            const data = await response.json();
            // await ‚Äì –∂–¥—ë–º, –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏—Ç.
            // await response.json() ‚Äì –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤ –º–∞—Å—Å–∏–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
            // response ‚Äì –æ–±—ä–µ–∫—Ç —Å –æ—Ç–≤–µ—Ç–æ–º –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.
            console.log(data);
            // console.log(data); ‚Äì –≤—ã–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏).
            return data;
            // return data; ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
        } catch (error) {
            return rejectWithValue(error.message);
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
            // –ï—Å–ª–∏ try –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç (catch), –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞).
            // rejectWithValue(error.message) ‚Äì –ø–µ—Ä–µ–¥–∞—ë–º —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –≤ Redux store.
        }
    }
);

// üî• –ò—Ç–æ–≥
// ‚úÖ category.js –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
// ‚úÖ productApi.js –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ localStorage.
// ‚úÖ –û–±–∞ —Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç fetch() –∏ createAsyncThunk, —á—Ç–æ–±—ã Redux —Å–ª–µ–¥–∏–ª –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º –∑–∞–≥—Ä—É–∑–∫–∏.
